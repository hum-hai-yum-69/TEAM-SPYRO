<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Parking Admin Pro</title>
<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Segoe UI', Arial, sans-serif;
}

body{
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:
linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.6)),
url("carparking.jpeg") center/cover no-repeat;
}


/* MAIN GLASS CARD */
.box{
width:360px;
padding:35px;
backdrop-filter:blur(20px);
background:rgba(255,255,255,0.12);
border-radius:18px;
box-shadow:
0 10px 40px rgba(0,0,0,0.4),
inset 0 0 20px rgba(255,255,255,0.08);
text-align:center;
color:white;
transition:0.3s;
}

.box:hover{
transform:translateY(-3px);
}


/* INPUT STYLE */
input{
width:100%;
padding:12px;
margin:10px 0;
border-radius:8px;
border:none;
background:rgba(255,255,255,0.15);
color:white;
outline:none;
font-size:14px;
transition:0.3s;
}

input::placeholder{
color:rgba(255,255,255,0.7);
}

input:focus{
background:rgba(255,255,255,0.25);
box-shadow:0 0 10px rgba(0,200,83,0.6);
}


/* BUTTON */
button{
width:100%;
padding:13px;
border:none;
border-radius:10px;
margin-top:12px;
cursor:pointer;
background:linear-gradient(45deg,#00c853,#64dd17);
color:white;
font-weight:bold;
font-size:15px;
transition:0.3s;
box-shadow:0 5px 15px rgba(0,200,83,0.5);
}

button:hover{
transform:translateY(-2px);
box-shadow:0 8px 20px rgba(0,200,83,0.7);
}


/* SWITCH TEXT */
.switch{
cursor:pointer;
color:#ffeb3b;
font-size:13px;
margin-top:14px;
transition:0.3s;
}

.switch:hover{
color:white;
text-shadow:0 0 8px rgba(255,255,255,0.8);
}

</style>
</head>

<body>

<div class="box">

<h2 id="title">Admin Login</h2>

<input id="name" placeholder="Admin Name" style="display:none">
<input id="phone" placeholder="Phone Number" style="display:none">
<input id="company" placeholder="Parking Company Name" style="display:none">

<input id="email" placeholder="Admin Email">
<input id="password" type="password" placeholder="Password">

<button onclick="mainAction()">Login</button>

<div class="switch" onclick="toggleForm()" id="switchText">
Don't have account? Create account
</div>

<div class="switch" onclick="resetPass()">Forgot password?</div>

<p id="status"></p>

</div>


<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth,
createUserWithEmailAndPassword,
signInWithEmailAndPassword,
onAuthStateChanged,
sendPasswordResetEmail }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

import { getDatabase, ref, set }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";


const firebaseConfig={
apiKey:"AIzaSyAkbz_WM6KT56g1awB-TviU8Uo1svrivJw",
authDomain:"carparkingapp-9267e.firebaseapp.com",
databaseURL:"https://carparkingapp-9267e-default-rtdb.firebaseio.com/",
projectId:"carparkingapp-9267e"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getDatabase(app);

let isLogin=true;


// AUTO LOGIN SESSION
onAuthStateChanged(auth,(user)=>{
if(user){
window.location.href="home.html";
}
});


// TOGGLE LOGIN/SIGNUP
window.toggleForm=function(){

isLogin=!isLogin;

document.getElementById("name").style.display=isLogin?"none":"block";
document.getElementById("phone").style.display=isLogin?"none":"block";
document.getElementById("company").style.display=isLogin?"none":"block";

document.getElementById("title").innerText=
isLogin?"Admin Login":"Create Admin Account";

document.getElementById("switchText").innerText=
isLogin?"Don't have account? Create account":"Already have account? Login";

}


// MAIN LOGIN/SIGNUP
window.mainAction=function(){

const email=document.getElementById("email").value;
const password=document.getElementById("password").value;

const allowedDomain="@gmail.com"; // ðŸ”¥ admin security

if(!email.includes(allowedDomain)){
document.getElementById("status").innerText="Only admin email allowed";
return;
}


if(isLogin){

signInWithEmailAndPassword(auth,email,password)
.then(()=>{

document.getElementById("status").innerText="Login Success";

})
.catch(e=>{
document.getElementById("status").innerText=e.message;
});

}else{

const name=document.getElementById("name").value;
const phone=document.getElementById("phone").value;
const company=document.getElementById("company").value;

createUserWithEmailAndPassword(auth,email,password)
.then((cred)=>{

// SAVE ADMIN DATA REALTIME DB
set(ref(db,"admins/"+cred.user.uid),{
name:name,
phone:phone,
company:company,
email:email
});

document.getElementById("status").innerText="Admin Created";

})
.catch(e=>{
document.getElementById("status").innerText=e.message;
});

}

}


// FORGOT PASSWORD
window.resetPass=function(){

const email=document.getElementById("email").value;

sendPasswordResetEmail(auth,email)
.then(()=>{

document.getElementById("status").innerText="Password reset email sent";

});

}

</script>

</body>
</html>