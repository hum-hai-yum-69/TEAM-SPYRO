<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parking Admin Pro</title>

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Segoe UI', Arial, sans-serif;
}

/* ===== BACKGROUND (PARKING THEME) ===== */
body{
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
padding:20px;
background:
linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.75)),
url("https://images.unsplash.com/photo-1506521781263-d8422e82f27a?auto=format&fit=crop&w=1600&q=80")
center / cover no-repeat;
color:white;
}

/* ===== BACK ARROW ===== */
.back-arrow{
position:fixed;
top:18px;
left:18px;
font-size:26px;
cursor:pointer;
padding:10px 14px;
border-radius:50%;
background:rgba(0,0,0,0.5);
backdrop-filter:blur(6px);
transition:0.3s;
z-index:10;
}
.back-arrow:hover{
background:rgba(0,0,0,0.85);
transform:translateX(-5px);
}

/* ===== CARD ===== */
.box{
width:100%;
max-width:380px;
padding:35px;
border-radius:20px;
text-align:center;
backdrop-filter:blur(18px);
box-shadow:0 15px 45px rgba(0,0,0,0.6);
background:linear-gradient(135deg,
rgba(0,200,83,0.35),
rgba(0,150,136,0.35),
rgba(33,150,243,0.35));
}

/* ===== TEXT ===== */
h2{ margin-bottom:20px; }

/* ===== INPUTS ===== */
input{
width:100%;
padding:14px;
margin:8px 0;
border-radius:10px;
border:none;
outline:none;
background:rgba(255,255,255,0.18);
color:white;
}
input::placeholder{
color:rgba(255,255,255,0.7);
}

/* ===== BUTTON ===== */
button{
width:100%;
padding:14px;
border:none;
border-radius:12px;
margin-top:14px;
cursor:pointer;
font-weight:bold;
color:white;
background:linear-gradient(45deg,#00c853,#64dd17);
}

/* ===== LINKS ===== */
.switch{
margin-top:15px;
font-size:13px;
cursor:pointer;
color:#ffeb3b;
}

/* ===== STATUS ===== */
#status{
margin-top:10px;
font-size:13px;
min-height:18px;
}
</style>
</head>

<body>

<div class="back-arrow" id="backBtn">‚Üê</div>

<div class="box">

<h2 id="title">Admin Login</h2>

<input id="name" placeholder="Admin Name" style="display:none">
<input id="phone" placeholder="Phone Number" style="display:none">
<input id="company" placeholder="Parking Company Name" style="display:none">

<input id="email" placeholder="Admin Email">
<input id="password" type="password" placeholder="Password">

<button id="actionBtn">Login</button>

<div class="switch" id="signupLink">
Don't have account? Create account
</div>

<div class="switch" id="forgotLink">
Forgot password?
</div>

<p id="status"></p>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
getAuth,
createUserWithEmailAndPassword,
signInWithEmailAndPassword,
sendPasswordResetEmail,
onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getDatabase, ref, set }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

/* ===== FIREBASE CONFIG ===== */
const firebaseConfig={
apiKey:"AIzaSyAkbz_WM6KT56g1awB-TviU8Uo1svrivJw",
authDomain:"carparkingapp-9267e.firebaseapp.com",
databaseURL:"https://carparkingapp-9267e-default-rtdb.firebaseio.com/",
projectId:"carparkingapp-9267e"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getDatabase(app);

/* ===== AUTO LOGIN (SAME AS OLD CODE) ===== */
onAuthStateChanged(auth,(user)=>{
if(user){
window.location.href="admin.html";
}
});

/* ===== DOM ===== */
const title=document.getElementById("title");
const name=document.getElementById("name");
const phone=document.getElementById("phone");
const company=document.getElementById("company");
const email=document.getElementById("email");
const password=document.getElementById("password");
const actionBtn=document.getElementById("actionBtn");
const signupLink=document.getElementById("signupLink");
const forgotLink=document.getElementById("forgotLink");
const backBtn=document.getElementById("backBtn");
const status=document.getElementById("status");

let mode="login"; // login | signup | forgot

/* ===== RESET TO LOGIN ===== */
function goLogin(){
mode="login";
title.innerText="Admin Login";
name.style.display="none";
phone.style.display="none";
company.style.display="none";
password.style.display="block";
actionBtn.innerText="Login";
signupLink.style.display="block";
forgotLink.style.display="block";
status.innerText="";
}

/* ===== BACK ARROW ===== */
backBtn.addEventListener("click",goLogin);

/* ===== SIGNUP ===== */
signupLink.addEventListener("click",()=>{
mode="signup";
title.innerText="Create Admin Account";
name.style.display="block";
phone.style.display="block";
company.style.display="block";
password.style.display="block";
actionBtn.innerText="Create Account";
signupLink.style.display="none";
forgotLink.style.display="none";
status.innerText="";
});

/* ===== FORGOT PASSWORD ===== */
forgotLink.addEventListener("click",()=>{
mode="forgot";
title.innerText="Reset Password";
name.style.display="none";
phone.style.display="none";
company.style.display="none";
password.style.display="none";
actionBtn.innerText="Send Reset Email";
signupLink.style.display="none";
forgotLink.style.display="none";
status.innerText="Enter your admin email";
});

/* ===== MAIN ACTION ===== */
actionBtn.addEventListener("click",()=>{
const emailVal=email.value.trim();

if(!emailVal){
status.innerText="Email is required";
return;
}

if(!emailVal.includes("@gmail.com")){
status.innerText="Only admin Gmail allowed";
return;
}

if(mode==="login"){
signInWithEmailAndPassword(auth,emailVal,password.value)
.then(()=>status.innerText="Login successful")
.catch(e=>status.innerText=e.message);
}

if(mode==="signup"){
createUserWithEmailAndPassword(auth,emailVal,password.value)
.then(cred=>{
set(ref(db,"admins/"+cred.user.uid),{
name:name.value,
phone:phone.value,
company:company.value,
email:emailVal
});
status.innerText="Admin account created";
})
.catch(e=>status.innerText=e.message);
}

if(mode==="forgot"){
sendPasswordResetEmail(auth,emailVal)
.then(()=>status.innerText="Password reset email sent")
.catch(e=>status.innerText=e.message);
}
});

/* INIT */
goLogin();
</script>

</body>
</html>
